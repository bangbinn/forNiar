<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Ucapan Ulang Tahun ðŸ’–</title>
  <style>
    :root{
      --bg1:#fff1f7; --bg2:#ffe3f0; --spark:#ffd1e6; --spark2:#ffc2df;
      --text:#4a2a38; --muted:#7c5365;
      --btn:#ff5fa3; --btn2:#ff77b7; --btnText:#fff;
      --cardBg:#ffd6e8;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--text);
      background:
        radial-gradient(900px 500px at -10% -10%, var(--spark) 0%, transparent 60%),
        radial-gradient(900px 500px at 110% 10%, var(--spark2) 0%, transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .wrap{min-height:100dvh; display:grid; place-items:center; padding:28px}
    .stage{width:min(940px, 100%); position:relative}

    .card{display:none; background:var(--cardBg); padding:32px; box-shadow:0 10px 28px rgba(255,105,166,.35); position:relative;}
    .card.active{display:flex; flex-direction:column; align-items:center; gap:20px; animation:fade .35s ease}

    /* Keyframes umum */
    @keyframes fade{from{opacity:0;} to{opacity:1;}}
    @keyframes slideUpFade{from{transform:translateY(20px); opacity:0} to{transform:none; opacity:1}}
    @keyframes slideInRight{from{transform:translateX(24px); opacity:0} to{transform:none; opacity:1}}
    @keyframes zoomFade{from{transform:scale(.96); opacity:0} to{transform:scale(1); opacity:1}}
    @keyframes flipUp{from{transform:rotateX(12deg) translateY(10px); opacity:0; transform-origin:bottom} to{transform:none; opacity:1}}

    /* Animasi khusus per card (2-5) */
    #card-2.active{animation:slideUpFade .45s ease-out both}
    #card-3.active{animation:slideInRight .45s cubic-bezier(.2,.9,.2,1) both}
    #card-4.active{animation:zoomFade .38s ease-out both}
    #card-5.active{animation:flipUp .5s cubic-bezier(.2,.9,.2,1) both}

    /* Responsive square cards */
    #card-2, #card-3, #card-4, #card-5 {
      width: clamp(280px, 80vw, 600px);
      height: clamp(280px, 70vh, 420px);
      border-radius: 0;
      justify-content: center;
      will-change: transform, opacity; /* smooth */
    }

    h1,h2{margin:0; text-align:center; color:#401826}
    .lead{color:var(--muted); text-align:center; max-width:52ch}

    .btn{
      appearance:none; border:none; cursor:pointer; font-weight:800;
      background:linear-gradient(180deg, var(--btn2), var(--btn)); color:var(--btnText);
      padding:14px 24px; border-radius:999px; box-shadow:0 10px 20px rgba(255,105,166,.35);
      transition:transform .15s ease, box-shadow .2s ease;
    }
    .btn:hover{transform:translateY(-2px); box-shadow:0 16px 28px rgba(255,105,166,.45)}

    #card-1{
      background:none; border:none; box-shadow:none; padding:0; min-height:auto;
    }
    .envelope{
      width:clamp(260px,70vw,500px);
      aspect-ratio:4/3;
      position:relative;
      background:#ffd6e8;
      box-shadow:0 16px 44px rgba(255,105,166,.42);
      cursor:pointer;
    }
    .envelope .flap-top{
      position:absolute; top:0; left:0; right:0; height:50%;
      background:#ffbcd8;
      clip-path:polygon(0 0,100% 0,50% 100%);
      transform-origin:top; transition:transform .8s ease;
    }
    .envelope.open .flap-top{transform:rotateX(180deg)}
    .envelope .flap-bottom{
      position:absolute; bottom:0; left:0; right:0; height:50%;
      background:#ffc9df;
      clip-path:polygon(0 100%,50% 0,100% 100%);
    }
    .envelope .flap-left{
      position:absolute; top:0; bottom:0; left:0; width:50%;
      background:#ffb2d2;
      clip-path:polygon(0 0,100% 50%,0 100%);
    }
    .envelope .flap-right{
      position:absolute; top:0; bottom:0; right:0; width:50%;
      background:#ffb2d2;
      clip-path:polygon(100% 0,100% 100%,0 50%);
    }
    .cta-open{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      padding:12px 20px; background:linear-gradient(135deg,#ffb6d2,#ff7fb3);
      border:none; border-radius:999px; color:#fff; font-weight:bold; box-shadow:0 12px 26px rgba(255,105,166,.45);
    }

    /* Tombol next di tengah bawah card */
    .next-cta{position:absolute; left:50%; bottom:22px; transform:translateX(-50%);} 
    #card-5 .btn{margin-top:auto;}
    #card-5 div{position:absolute; left:50%; bottom:22px; transform:translateX(-50%); display:flex; gap:12px;}

    /* CONFETTI */
    .confetti-layer{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:9999; font-size:20px; line-height:1}
    .confetti-piece{position:absolute; opacity:0; will-change:transform, opacity}

    @keyframes fall{
      0%{transform:translate3d(var(--x,0), -10vh, 0) rotate(0turn); opacity:0}
      15%{opacity:1}
      100%{transform:translate3d(var(--x,0), 105vh, 0) rotate(3turn); opacity:0}
    }
    @keyframes driftRight{
      0%{transform:translate3d(-5vw, var(--y,0),0) rotate(0turn); opacity:0}
      15%{opacity:1}
      100%{transform:translate3d(110vw, calc(var(--y,0) + 40vh),0) rotate(2.5turn); opacity:0}
    }
    @keyframes driftLeft{
      0%{transform:translate3d(105vw, var(--y,0),0) rotate(0turn); opacity:0}
      15%{opacity:1}
      100%{transform:translate3d(-15vw, calc(var(--y,0) + 40vh),0) rotate(-2.5turn); opacity:0}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="stage">
      <section class="card active" id="card-1">
        <div class="envelope" id="envelope">
          <div class="flap-top"></div>
          <div class="flap-left"></div>
          <div class="flap-right"></div>
          <div class="flap-bottom"></div>
          <button class="cta-open" id="btnOpen">Buka Amplop</button>
        </div>
      </section>

      <section class="card" id="card-2">
        <h2>ðŸŽ€Happy BirthdayðŸŽ€</h2>
        <p class="lead">25 bukan hanya angka, tapi cerminan dari segala perjuangan, mimpi, dan doa yang udah kamu jalani.ðŸ’•</p>
        <div class="next-cta"><button class="btn" data-next>Next âžœ</button></div>
      </section>

      <section class="card" id="card-3">
        <h2>ðŸŒ¸ Harapan Manis ðŸŒ¸</h2>
        <p class="lead">Semoga tahun ini menjadi awal dari banyak keajaiban baru dalam hidupmuâœ¨</p>
        <div class="next-cta"><button class="btn" data-next>Next âžœ</button></div>
      </section>

      <section class="card" id="card-4">
        <h2>ðŸ’– Stay Happy ðŸ’–</h2>
        <p class="lead">Jangan lupa self love, kamu deserve yang terbaik ðŸ’«</p>
        <div class="next-cta"><button class="btn" data-next>Next âžœ</button></div>
      </section>

      <section class="card" id="card-5">
        <h2>Sudah Siap Rayakan? ðŸ¥³</h2>
        <p class="lead">Dont worry, tidak semua bunga mekarnya bersamaan</p>
        <div>
          <button class="btn success" id="celebrateBtn">Rayakan ðŸŽŠ</button>
          <button class="btn warn" id="repeatBtn">Ulangi â†»</button>
        </div>
      </section>
    </div>
  </div>

  <div class="confetti-layer" id="confetti"></div>

  <script>
    const cards=[...document.querySelectorAll('.card')];
    let current=0;
    function showCard(idx){cards.forEach((c,i)=>c.classList.toggle('active',i===idx));current=idx;}

    document.getElementById('btnOpen').addEventListener('click',()=>{
      document.getElementById('envelope').classList.add('open');
      setTimeout(()=>showCard(1),650);
    });

    document.querySelectorAll('[data-next]').forEach(btn=>btn.addEventListener('click',()=>showCard(Math.min(current+1,cards.length-1))));
    document.getElementById('repeatBtn').addEventListener('click',()=>showCard(1));
    document.getElementById('celebrateBtn').addEventListener('click',()=>runConfetti());

    const confettiLayer=document.getElementById('confetti');
    function spawnPiece(style){
      const el=document.createElement('span');
      el.className='confetti-piece';
      el.textContent='ðŸ˜­';
      el.style.fontSize=(18+Math.random()*10)+'px';
      if(style==='top'){
        el.style.left=Math.random()*100+'vw';
        el.style.setProperty('--x', (Math.random()*20-10)+'px');
        el.style.animation=`fall ${2.8+Math.random()*1.5}s linear forwards`;
      }
      if(style==='left'){
        el.style.top=Math.random()*70+'vh';
        el.style.setProperty('--y', (Math.random()*10-5)+'vh');
        el.style.animation=`driftRight ${2.2+Math.random()*1.6}s ease-out forwards`;
      }
      if(style==='right'){
        el.style.top=Math.random()*70+'vh';
        el.style.setProperty('--y', (Math.random()*10-5)+'vh');
        el.style.animation=`driftLeft ${2.2+Math.random()*1.6}s ease-out forwards`;
      }
      el.addEventListener('animationend',()=>el.remove());
      confettiLayer.appendChild(el);
    }

    function rainTop(duration=2500,rate=6){
      const start=performance.now();
      function frame(now){
        if(now-start<duration){ for(let i=0;i<rate;i++) spawnPiece('top'); requestAnimationFrame(frame); }
      }
      requestAnimationFrame(frame);
    }
    function burstSides(duration=2200,batch=6){
      const start=performance.now();
      function frame(now){
        if(now-start<duration){ for(let i=0;i<batch;i++){ spawnPiece('left'); spawnPiece('right'); } setTimeout(()=>requestAnimationFrame(frame),300); }
      }
      requestAnimationFrame(frame);
    }
    function runConfetti(){ rainTop(); burstSides(); }
  </script>
</body>
</html>
